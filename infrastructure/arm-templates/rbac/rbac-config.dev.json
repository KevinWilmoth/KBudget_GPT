{
  "description": "RBAC configuration for Development environment",
  "environment": "dev",
  "roleAssignments": [
    {
      "principalType": "Group",
      "principalIdentifier": "KBudget-Developers",
      "role": "Contributor",
      "scope": {
        "type": "ResourceGroup",
        "name": "kbudget-dev-rg"
      },
      "justification": "Development team needs to deploy and manage resources in dev environment"
    },
    {
      "principalType": "Group",
      "principalIdentifier": "KBudget-QA",
      "role": "Reader",
      "scope": {
        "type": "ResourceGroup",
        "name": "kbudget-dev-rg"
      },
      "justification": "QA team needs read access to validate deployments"
    },
    {
      "principalType": "ServicePrincipal",
      "principalIdentifier": "kbudget-dev-automation",
      "role": "Contributor",
      "scope": {
        "type": "ResourceGroup",
        "name": "kbudget-dev-rg"
      },
      "justification": "CI/CD pipeline service principal for automated deployments"
    },
    {
      "principalType": "ServicePrincipal",
      "principalIdentifier": "kbudget-dev-app",
      "role": "Storage Blob Data Contributor",
      "scope": {
        "type": "StorageAccount",
        "name": "kbudgetdevstorage"
      },
      "justification": "App Service managed identity needs to read/write blob data"
    },
    {
      "principalType": "ServicePrincipal",
      "principalIdentifier": "kbudget-dev-app",
      "role": "Key Vault Secrets User",
      "scope": {
        "type": "KeyVault",
        "name": "kbudget-dev-kv"
      },
      "justification": "App Service managed identity needs to read secrets from Key Vault"
    },
    {
      "principalType": "ServicePrincipal",
      "principalIdentifier": "kbudget-dev-func",
      "role": "Storage Blob Data Contributor",
      "scope": {
        "type": "StorageAccount",
        "name": "kbudgetdevstorage"
      },
      "justification": "Azure Functions managed identity needs to process blob data"
    },
    {
      "principalType": "ServicePrincipal",
      "principalIdentifier": "kbudget-dev-func",
      "role": "Key Vault Secrets User",
      "scope": {
        "type": "KeyVault",
        "name": "kbudget-dev-kv"
      },
      "justification": "Azure Functions managed identity needs to read secrets"
    },
    {
      "principalType": "Group",
      "principalIdentifier": "KBudget-Security-Team",
      "role": "Security Reader",
      "scope": {
        "type": "ResourceGroup",
        "name": "kbudget-dev-rg"
      },
      "justification": "Security team needs to audit security configurations"
    }
  ]
}
